# IPv6
_ _ _

Пример записи IPv6 адреса 2001:0db8:0000:1111:0000:0000:0000:0200/64 или сокращенно 2001:db8:0:1111::200/64
- IP адрес состоит из 128 бит, написанных в виде шестнацатеричных значений, каждый сегмент состоит из 16 бит называемых хестетом
- Можно сократить написание адреса - убрать  ведущие нули, так же если в хекстете все нули их можно заменить двойным двоеточием :: ( можно использовать только 1 раз в записи)
- В IPv6 диапазон префикса может составлять от 0 до 128. Обычная длина префикса /64. Сетевая чать называется префиксом сети, хостовая - ID интерфейсом ( так как на одном физическом интерефесе может быть множество адресов)

### Типы IPv6 адресов
1. unicast
- GUA - глобальные индивидуальные IPv6 адреса уникальны по всему миру и доступны для маршрутизации через интернет от 2000::/3 до 3fff . Провайдер получает от регистартора подсеть /32, клиенту рекомендуется выдавать подсеть с префиксом /48, но не меньше /56 .
- LLA - link local address находятся в диапазоне fe80::/10 . Нужны для обмена информации внутри локальной подсети. Для удобства на маршрутизаторе можно установить на все интерфейсы одинаковый lla адрес ( так LLA не маршрутизируются)
- Loopback - ::1/128
- Unspecifed address - ::/128 Используется при запросе узлом адреса от dhcp сервера (так как у узла ip еще нет, то вписывается этот адрес)
- Unique local - fc00::/7 - fdff::/7 - частные ip адреса (не маршрутизируются в интернет)
- IPv4 embedded - адреса IPv4, отображённые в IPv6 
2. multicast
- Групповые адреса IPv6 имеют префикс FF00::/8    
FF02::1 - группа на которую подписаны все устройства в сети (аналог бродкаста)     
ff02::2 группа на которую подписаны все маршрутизаторы IPv6 сети.      
FF02::1:FF и последние 24 бита из IPv6 адреса на итерфейсе - все узлы у которых последние 24 бита совпадают будут подписаны на эту группу.
3. Anycast
- Любой индивидуальный IPv6-адрес, который может быть назначен нескольким устройствам. Пакет, отправляемый на адрес произвольной рассылки, напрявляется к ближайшему устройству с этим адресом.

### Динамическая адресация IPv6
Если в сети работает маршрутизатор, то он переодически рассылает служебную информацию через сообщения протокола ICMP6 об адресации:
Сообщения Router Advertisement (RA) отправляются для информирования хостов о том, как получить GUA IPv6, и предоставления полезной информации, такой как:
- Длину префикса и префикс сети
- Адрес Шлюза по умолчанию
- DNS адреса и доменное имя

RA может предоставить три метода настройки GUA IPv6:
- SLAAC - позволяет настраивать GUA без служб DHCPv6. Префикс предоставляется RA, и устройство использует либо EUI-64 (использует MAC железки, в таком IP подставляются дополнительные 16 бит :ff:fe:), либо метод случайной генерации для создания ID интерфейса
- SLAAC и DHCPv6 без сохранения состояний - часть информации передается маршрутизатором, остальную часть получаем от DHCP сервера
- Динамический DHCPv6 с сохранением состояний (без SLAAC) - Атоконфигурация запрещена (классический DHCP)

### [ ICMPv6 ](https://github.com/LLlMEJIb87/OTUS-learning/tree/master/9.%20ICMP#icmpv6)
